<source>
  @type tail
  path /var/log/supervisord/solr.log
  pos_file /var/log/fluentd/solr.log.pos
  tag solr
  emit_unmatched_lines true
  <parse>
    @type regexp
    expression /^((?<log_time>\d{4}-\d{2}-\d{2} \d{2}:\d{2}:\d{2}\.\d+)\s+(?<log_level>([^\s]+))\s+((\([^\)]*\)\s+\[\s*(?<solr_index>[^\]]+)\s*\].*(webapp=(?<solr_webapp>[^\s]+)).*(path=(?<solr_path>[^\s]+)).*(params=(?<solr_params>{[^\}]+}))((.*hits=(?<solr_hits>\d+))?(.*status=(?<solr_status>\d+)(.*QTime=(?<solr_qtime>\d+)?)?)?)?)?))?(?<message>.+)?$/
    types solr_hits:integer,solr_status:integer,solr_qtime:integer
  </parse>
</source>

<source>
  @type tail
  path /var/log/supervisord/solr-err.log
  pos_file /var/log/fluentd/solr-err.log.pos
  tag solr_err
  emit_unmatched_lines true
  <parse>
    @type none
  </parse>
</source>

